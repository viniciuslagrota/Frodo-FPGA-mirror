/*
 * random.c

 *
 *  Created on: 1 de dez de 2019
 *      Author: Vinicius
 */
#include "random.h"

int randombytes(unsigned char* random_array, unsigned long long nbytes)
{
	int32_t i32nBytesCount = nbytes;
	u32 u32Random;
	u32 idx = 0;

	printf("Random bytes requested: %d %d \n", i32nBytesCount);

	printf("Random: %x\n", u32Random);

	while(i32nBytesCount > 3) //Se usar unsigned, nao vai funcionar.
	{
		i32nBytesCount -= 4;
		u32Random = rand();

//		random_array[idx + 0] = u32Random & 0xff;
//		random_array[idx + 1] = (u32Random >> 8) & 0xff;
//		random_array[idx + 2] = (u32Random >> 16) & 0xff;
//		random_array[idx + 3] = (u32Random >> 24) & 0xff;

		memcpy(&random_array[idx], &u32Random, 4);

		idx += 4;
	}

	if(i32nBytesCount != 0)
	{
		memcpy(&random_array[idx], &u32Random, i32nBytesCount);
	}


	return passed;
}
